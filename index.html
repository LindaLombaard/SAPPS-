<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<title>SA Private Protection Services</title>

<style>
  :root{
    --brand:#ff7b00;
    --black:#111;
    --white:#fff;
    --nav-height:64px;
  }

  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{
    margin:0;
    font-family:"Montserrat",sans-serif;
    color:#222;
    background:#fff;
  }

  /* ---------- NAV ---------- */
  nav{
    position:fixed;
    top:0;
    left:0;
    right:0;
    height:var(--nav-height);
    background:rgba(0,0,0);
    display:flex;
    align-items:center;
    z-index:2200; /* keep nav above most content */
    padding:0 18px;
    box-shadow:0 1px 0 rgba(255,255,255,0.03) inset;
    gap:12px;
    justify-content:space-between;
  }

  /* brand/logo area (optional) */
  .nav-brand{ display:flex; align-items:center; gap:12px; }
  .nav-brand a{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width:44px;
    height:32px;
    border-radius:6px;
    overflow:hidden;
    text-decoration:none;
  }

  /* nav list (default horizontal) */
  nav ul{
    list-style:none;
    margin:0;
    padding:0;
    display:flex;
    gap:18px;
    align-items:center;
    width:100%;
    justify-content:top;
  }

   nav li{position:relative}
  nav a{
    color:var(--white);
    text-decoration:none;
    padding:10px 14px;
    display:inline-block;
    font-weight:600;
    border-radius:4px;
  }
  nav a:hover{background:rgba(255,255,255,0.06)}
  nav a.active{
    color:#fff;
  }
  /* Custom mobile adjustments for hero and spacing */
@media (max-width: 520px) {
  .hero {
    height: 25vh !important; /* Reduced height */
    min-height: 150px !important; /* Reduced min-height */
  }
  .hero-overlay {
    background: transparent !important; /* Ensure transparency */
  }
  main {
    padding-top: 20px !important; /* Reduced top padding */
  }
}
  /* submenu: make it behave like mobile (static) so it opens inline inside the menu overlay */
  .submenu{
    display:none;
    position:static; /* important: static so it flows in the menu overlay */
    background:transparent;
    border-radius:0;
    min-width:0;
    flex-direction:column;
    padding:0;
    box-shadow:none;
  }
  .submenu.open{ display:flex; }

  .submenu li{padding:0}
  .submenu li a{padding:10px 16px; width:100%; display:block; color:var(--white)}
  .submenu li a:hover{background:rgba(255,255,255,0.04)}
 
  /* ---------- HERO ---------- */
  .hero {
    height: min(80vh, 780px);
    min-height: 40vh;
    background: url('sapps-banner-1.png') center/cover no-repeat;
    background-size: cover;
    background-position: center;
    background-attachment: scroll;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: transparent;
    margin-top: var(--nav-height);
    text-align: center;
    overflow: hidden;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background:transparent;
    transition: background .25s linear;
    z-index: 1;
    pointer-events: none; /* allow clicks to pass through */
  }

  .hero .content {
    position: relative;
    z-index: 2;
    padding: 0 20px;
    text-align: center;
     max-width: 920px;
  }

  .hero h1 {
    margin:0 0 8px 0;
    font-weight:800;
    color:transparent;
    line-height:1.02;
    font-size: clamp(1.6rem, 6vw, 3.2rem);
  }
  .hero p {
   margin:0;
    font-size: clamp(.9rem, 2.4vw, 1.05rem);
    opacity:0.95;
  }

  /* sections base */
  main{max-width:1200px; margin:0 auto; padding:48px 18px}
  h2.section-title{color:var(--brand); font-size:1.6rem; margin:18px 0 20px; text-align:left}
  section{margin:18px 0; opacity:0; transform:translateY(30px); transition:all .7s ease-out; scroll-margin-top:calc(var(--nav-height) + 12px)}
  section.visible{opacity:1; transform:none}

  /* ---------- SERVICES (cards) ---------- */
  .services-wrap{padding:12px 18px}
  .services-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:22px;
    align-items:start;
  }

  .service-card{
    background:#fff;
    border-radius:10px;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    overflow:hidden;
    display:flex;
    flex-direction:column;
    text-decoration:none;
    transition:transform .25s ease, box-shadow .25s ease;
  }

  .service-card:hover{transform:translateY(-8px); box-shadow:0 18px 36px rgba(0,0,0,0.12)}
  .service-image{height:160px; width:100%; object-fit:cover; display:block}
  .service-body{padding:20px; text-align:center; flex:1; display:flex; align-items:center; justify-content:center}
  .service-body h3{margin:0; font-size:1rem; color:#111}

  /* ---------- PACKAGES ---------- */
  .packages-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:22px;
    align-items:stretch;
    justify-items:center;
  }
  .package-card{
    width:220px;
    background:#fff;
    border-radius:10px;
    padding:18px;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    text-align:center;
    transition:transform .2s ease;
    text-decoration:none;
    color:#111;
  }
  .package-card:hover{transform:translateY(-6px)}
  .package-card .price{margin-top:10px; color:#555; font-size:.95rem}

  /* ---------- GALLERY (masonry-like) ---------- */
  .gallery-grid{
    column-gap:18px;
    column-count:4;
     z-index: 0;
    position: relative;
  }
  .gallery-grid img{
    width:100%; 
    display:block;
     margin-bottom:14px; 
     border-radius:10px; 
     box-shadow:0 6px 18px rgba(0,0,0,0.06); 
     cursor:pointer;
    height:auto;
    z-index:1;
    position:relative;
    pointer-events:auto;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    transform: translateZ(0);
    }
    .gallery-grid img:hover{opacity:0.9}

  /* smaller columns on tablets/phones */
  @media (max-width:1200px){ .services-grid{grid-template-columns:repeat(3,1fr)} .gallery-grid{column-count:3} }
  @media (max-width:900px){ .services-grid{grid-template-columns:repeat(2,1fr)} .packages-grid{grid-template-columns:repeat(2,1fr)} .gallery-grid{column-count:2} .hero h1{font-size:2.2rem} }
  @media (max-width:520px){ 
    .services-grid{grid-template-columns:1fr} 
    .packages-grid{grid-template-columns:1fr} 
    .gallery-grid{column-count:1} 
    .hero{height:55vh}
  .nav-brand a { width:36px; height:28px; }
  }
  @media (max-width: 520px) {
  .hero {
    background-color: transparent !important;
    height: 38vh !important;
    min-height: 180px !important;
    background-size: contain !important;
    background-position: top !important;
    background-repeat: no-repeat !important;
    margin-bottom: 0 !important;
  }
}
 
  /* floating social */
  .floating-buttons{position:fixed; right:18px; bottom:20px; display:flex; flex-direction:column; gap:12px; z-index:1300}
  .float-btn{width:44px; height:44px; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(0,0,0,0.15); transition:transform .18s ease}
  .float-btn img{width:22px;height:22px; display:block}
  .float-btn:hover{transform:translateY(-5px)}
  .float-btn.whatsapp{background:#25D366}
  .float-btn.facebook{background:#1877F2}
  .float-btn.tiktok{background:#000; border:2px solid #ff0050}
  .float-btn.linkedin{background:#0A66C2}

  /* small helper */
  .section-head{display:flex; align-items:center; gap:16px; justify-content:space-between}

  /* ---------- MOBILE / OVERLAY MENU behaviour for all viewports ----------
     Make the mobile-style overlay menu available on all screen sizes.
     - nav-toggle is visible on all sizes (so user can open the overlay)
     - when #navLinks has .open it becomes a full-screen vertical overlay (same as mobile)
     -------------------------------------------------------------------- */

  /* show hamburger toggle for all viewports so desktop can open the overlay menu */
  .nav-toggle {
    display:flex;
    background:transparent;
    border:0;
    cursor:pointer;
    gap:6px;
    padding:8px;
    align-items:center;
    justify-content:center;
  }
  .nav-toggle .bar{ display:block; width:22px; height:2px; background:var(--white); border-radius:2px; transition:transform .25s, opacity .25s;}

  /* submenu toggle button (mobile only) */
  .submenu-toggle { display:none; background:transparent; border:0; color:var(--white); padding:8px; cursor:pointer; }

  @media (max-width: 768px) {
    nav { padding:0 12px; }
    .nav-toggle { display:flex; }

    nav ul{
      position:fixed;
      top:var(--nav-height);
      left:0;
      right:0;
      background:var(--black);
      flex-direction:column;
      align-items:stretch;
      gap:0;
      padding:8px 0;
      transform:translateY(-120%);
      transition:transform .35s ease-in-out;
      z-index:1250;
    }
    nav ul.open { transform:translateY(0); }

    nav li { width:100%; border-top:1px solid rgba(255,255,255,0.03); }
    nav a { display:block; width:100%; text-align:left; padding:14px 18px; }
    .submenu { position:static; background:transparent; box-shadow:none; padding-left:12px; display:none; }
    .submenu.open { display:flex; flex-direction:column; }
    .submenu li a { padding:10px 28px; background:transparent; border-radius:0; }

    .submenu-toggle { display:inline-flex; align-items:center; justify-content:center; padding:12px; margin-left:auto; }
  }

  /* small visual for open submenu (keyboard focus/indicator) */
  nav li.submenu-open > a { background:rgba(255,255,255,0.04); }

/* default (non-open) nav menu remains horizontal; when opened, become overlay */
  nav ul.open {
    position:fixed;
    top:var(--nav-height);
    left:0;
    right:0;
    bottom:0;
    background:rgba(17,17,17,0.98);
    flex-direction:column;
    align-items:stretch;
    gap:0;
    padding:12px 0;
    overflow:auto;
    transform:none;
    transition:none;
    z-index:2150;
  }
  /* overlay list items */
  nav ul.open > li { width:100%; border-top:1px solid rgba(255,255,255,0.03); }
  nav ul.open a { display:block; width:100%; text-align:left; padding:14px 18px; }

  /* when overlay is open, submenu should be static and visible when .open */
  nav ul.open .submenu { position:static; background:transparent; box-shadow:none; padding-left:10px; display:none; }
  nav ul.open .submenu.open { display:flex; flex-direction:column; }

  /* submenu toggle button (visible within overlay and on desktop) */
  .submenu-toggle { display:inline-flex; align-items:center; justify-content:center; padding:10px; margin-left:auto; background:transparent; border:0; color:var(--white); cursor:pointer; }
  /* small visual for open submenu (keyboard focus/indicator) */
  nav li.submenu-open > a { background:rgba(255,255,255,0.04); }

  /* lightbox tweaks */
  .lightbox { display:none; z-index:9999; }
  .lightbox .lightbox-content { max-width:92%; max-height:78%; }

</style>
</head>
<body>

  <!-- NAV -->
  <nav id="mainNav" aria-label="Main navigation">
    <div class="nav-brand" aria-hidden="false">
  <a href="#home" class="logo" aria-label="Home">
    <img src="logo-dark.jpg" alt="SA Private Protection Services Logo" style="width:44px; height:32px; object-fit:contain; border-radius:6px;">
  </a>
</div>
      <span style="color:var(--white); font-weight:bold; font-size:1.1rem;">SA Private Protection Services</span>

    <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-label="Open menu">
      <span class="bar"></span>
    </button>

    <ul id="navLinks" role="menubar" aria-label="Primary">
      <li><a href="#home" class="nav-link">Home</a></li>
      <li><a href="#about" class="nav-link">About</a></li>
      <li class="has-submenu">
        <a href="#services" class="nav-link" aria-haspopup="true" aria-expanded="false">Our Services</a>
        <button class="submenu-toggle" aria-expanded="false" aria-label="Toggle Our Services submenu">▾</button>
        <ul class="submenu" aria-label="Our Services submenu">
          <li><a href="#armed-response" class="nav-link">24-Hour Armed Response</a></li>
          <li><a href="#close-protection" class="nav-link">Close Protection Services</a></li>
          <li><a href="#guarding" class="nav-link">Guarding Services</a></li>
          <li><a href="#escorts" class="nav-link">Escorts & Transfers</a></li>
          <li><a href="#event-security" class="nav-link">Event Security</a></li>
          <li><a href="#surveillance" class="nav-link">Surveillance & Monitoring</a></li>
        </ul>
      </li>
      <li class="has-submenu">
        <a href="#packages" class="nav-link" aria-haspopup="true" aria-expanded="false">Response Packages</a>
        <button class="submenu-toggle" aria-expanded="false" aria-label="Toggle Response Packages submenu">▾</button>
        <ul class="submenu" aria-label="Response Packages submenu">
          <li><a href="#residential" class="nav-link">Residential</a></li>
          <li><a href="#pensioner" class="nav-link">Pensioner</a></li>
          <li><a href="#small-business" class="nav-link">Small Business</a></li>
          <li><a href="#large-business" class="nav-link">Large Business</a></li>
        </ul>
      </li>
      <li><a href="#contact" class="nav-link">Contact</a></li>
    </ul>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero" role="banner">
  <div class="hero-overlay" id="heroOverlay"></div>
  <div class="content">
  </div>
</header>

  <main>

    <!-- ABOUT -->
    <section id="about" class="about-section">
      <div class="section-head">
        <h2 class="section-title">About Us</h2>
      </div>
       <p>Established in 2016, SA Private Protection Services (Pty) Ltd has consistently delivered high-quality security solutions to a growing client base. With a proven track record of retaining clients and expanding our expertise, we pride ourselves on mastering the art of client satisfaction. Our flat corporate structure ensures seamless communication and flexibility, allowing us to adapt to your evolving security needs.</p>

  <p>SA Private Protection Services has established itself as a trusted security partner for some of South Africa's largest retailers. We provide tailored security solutions to prominent food retailers, liquor chains, and clothing franchises, ensuring the safety and security of the people, premises, and assets.</p>

  <p>Our expertise in risk management, surveillance, and armed response enables us to mitigate potential threats and protect our clients' interests. With a proven track record of delivering high-quality security services, SA Private Protection Services is the partner of choice for businesses seeking to safeguard their operations.</p>
</section>

    <!-- SERVICES GRID (cards clickable to anchors) -->
    <section id="services" class="services-wrap">
      <h2 class="section-title">Our Services</h2>

      <div class="services-grid">
        <!-- Each card is an anchor (and is clickable) -->
        <a id="armed-response" class="service-card" href="armed-response-details.html" title="24-Hour Armed Response">
          <img class="service-image" src="service1.jpg" alt="24-Hour Armed Response">
          <div class="service-body"><h3>24-Hour Armed Response</h3></div>
        </a>

        <a id="close-protection" class="service-card" href="close-protection-details.html" title="Close Protection Services">
          <img class="service-image" src="service2.jpg" alt="Close Protection Services">
          <div class="service-body"><h3>Close Protection Services</h3></div>
        </a>

        <a id="guarding" class="service-card" href="security-services-details.html" title="Guarding Services">
          <img class="service-image" src="service3.jpg" alt="Guarding Services">
          <div class="service-body"><h3>Guarding Services</h3></div>
        </a>

        <a id="escorts" class="service-card" href="escort-details.html" title="Escorts & Transfers">
          <img class="service-image" src="escort4.jpeg" alt="Escorts & Transfers">
          <div class="service-body"><h3>Escorts & Transfers</h3></div>
        </a>

        <a id="event-security" class="service-card" href="event-security-details.html" title="Event Security">
          <img class="service-image" src="gallery2.jpg" alt="Event Security">
          <div class="service-body"><h3>Event Security</h3></div>
        </a>

        <a id="surveillance" class="service-card" href="surveillance-alarm-details.html" title="Surveillance & Monitoring">
          <img class="service-image" src="gallery11.jpg" alt="Surveillance & Monitoring">
          <div class="service-body"><h3>Surveillance & Monitoring</h3></div>
        </a>

        <!-- If you have more cards they will wrap to next row automatically -->
      </div>
    </section>

    <!-- PACKAGES -->
    <section id="packages">
      <h2 class="section-title">Response Packages</h2>
      <div class="packages-grid" style="margin-top:18px;">
        <a id="residential" class="package-card" href="#residential">
          <strong>Residential</strong>
          <div class="price">R345.00 Per Month</div>
        </a>
        <a id="pensioner" class="package-card" href="#pensioner">
          <strong>Pensioner</strong>
          <div class="price">R172.50 Per Month</div>
        </a>
        <a id="small-business" class="package-card" href="#small-business">
          <strong>Small Business</strong>
          <div class="price">R448.50 Per Month</div>
        </a>
        <a id="large-business" class="package-card" href="#large-business">
          <strong>Large Business</strong>
          <div class="price">R678.50 Per Month</div>
        </a>
      </div>
    </section>

<!-- LIGHTBOX MODAL -->
<div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
  <span class="close" role="button" aria-label="Close">&times;</span>
  <img class="lightbox-content" id="lightbox-img" alt="">
  <div id="caption"></div>
  <a class="prev" role="button" aria-label="Previous image">&#10094;</a>
  <a class="next" role="button" aria-label="Next image">&#10095;</a>
</div>

    <!-- CONTACT -->
<section id="contact">
  <h2>Contact Us</h2>

  <div class="contact-container">
    <!-- Contact Details -->
    <div class="contact-details">
      <p><strong>Office:</strong> <a href="tel:0100060366">010 006 0366</a></p>
      <p><strong>Director - Jaco Human:</strong> <a href="tel:0732105102">073 210 5102</a></p>
      <p><strong>HR & Accounts - Natasha Kok:</strong> <a href="tel:0838801768">083 880 1768</a></p>
      <p><strong>Email:</strong> 
        <a href="mailto:jhuman@sapps.co.za">jhuman@sapps.co.za</a> | 
        <a href="mailto:admin@sapps.co.za">admin@sapps.co.za</a>
      </p>
      <p><strong>Address:</strong> 51 Vaal Drive, Pietersfield Ext, Springs, 1559</p>

      <!-- Office Hours -->
      <div class="office-hours">
        <h3>Office Hours</h3>
        <p>Monday - Thursday: 08:00 AM - 04:00 PM</p>
        <p>Friday: 08:00 AM - 02:00 PM</p>
        <p>Sunday & Public Holidays: Closed</p>
      </div>
    </div>

    <!-- Contact Form -->
<div class="contact-form">
  <h3>Send Us a Message</h3>
  <form id="contactForm">
    <input type="text" name="name" placeholder="Your Name" required>
    <input type="email" name="email" placeholder="Your Email" required>
    <input type="tel" name="phone" placeholder="Your Phone Number">
    <textarea name="message" placeholder="Your Message" rows="5" required></textarea>
    <button type="submit">Send Message</button>
  </form>

  <!-- Thank You Message -->
  <div id="thankYouMessage" style="display:none; color: green; margin-top: 20px;">
    ✅ Thanks for your message! We'll be in touch soon.
  </div>
</div>

</div>
</section>

<style>
  /* Container & Layout */
  #thankYouMessage {
    display: none;
    color: green;
    margin-top: 20px;
    transition: opacity 0.4s ease;
    opacity: 0;
  }

  #thankYouMessage.show {
    display: block;
    opacity: 1;
  }

  #contact {
    background:#fff;
    color:#000000e0;
    padding:60px 20px;
    font-family:'Montserrat', sans-serif;
  }
  #contact h2 {
    text-align:center;
    color:#ff7f00;
    margin-bottom:40px;
  }
  .contact-container {
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
    gap:40px;
    max-width:1200px;
    margin:0 auto;
  }
  .contact-details, .contact-form {
    flex:1 1 350px;
    min-width:300px;
  }

  /* Contact Details & Links */
  .contact-details a {
    color:#ff7f00;
    text-decoration:none;
    transition:color 0.3s;
  }
  .contact-details a:hover {
    color:#e65c00;
  }
  .office-hours h3 {
    color:#ff7f00;
    margin-bottom:10px;
  }

  /* Contact Form */
  .contact-form {
    background:#9b9898;
    color:#fff;
    padding:30px;
    border-radius:15px;
    box-shadow:0 4px 15px rgba(0,0,0,0.2);
  }
  .contact-form h3 {
    color:#ff7f00;
    text-align:center;
    margin-bottom:20px;
  }
  .contact-form form {
    display:flex;
    flex-direction:column;
    gap:15px;
  }
  .contact-form input, 
  .contact-form textarea {
    padding:10px;
    border:none;
    border-radius:8px;
    font-family:'Montserrat', sans-serif;
    font-size:1rem;
  }
  .contact-form button {
    background:#ff7f00;
    color:#fff;
    padding:12px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    transition:all 0.3s;
  }
  .contact-form button:hover {
    background:#e65c00;
    transform:scale(1.05);
  }
</style>

<script>
  /* =========================
     CONTACT FORM (kept original functionality)
     ========================= */
  const form = document.getElementById('contactForm');
  const thankYou = document.getElementById('thankYouMessage');

  form.addEventListener('submit', async (e) => {
    e.preventDefault(); // prevent page reload

    const formData = new FormData(form);

    try {
      const response = await fetch('https://formspree.io/f/mrbljqpk', {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (response.ok) {
        form.reset();
        // show animated thank you
        thankYou.classList.add('show');
        // hide after a while (optional)
        setTimeout(() => {
          thankYou.classList.remove('show');
        }, 6000);
      } else {
        alert('Oops! Something went wrong. Please try again.');
      }
    } catch (error) {
      alert('Error submitting form. Please try again later.');
    }
  });
</script>

  <!-- LEGAL FOOTER -->
<footer style="background:#111; color:#fff; padding:28px 0; text-align:center; font-family:'Montserrat',sans-serif;">
  <div class="footer-content" style="max-width:1200px; margin:0 auto; display:flex; flex-direction:column; align-items:center; gap:12px;">

    <!-- Small Logo -->
    <div class="footer-logo">
      <img src="footer-logo.jpeg" alt="SA Private Protection Services Logo" style="height:30px; object-fit:contain;">
    </div>

    <!-- Legal Links -->
    <ul class="legal-links" style="list-style:none; display:flex; flex-wrap:wrap; justify-content:center; gap:15px; padding:0; margin:0; font-size:14px;">
      <li><a href="terms-of-service.html" target="_blank" style="color:#fff; text-decoration:none;">Terms of Service</a></li>
      <li><a href="privacy-policy.html" target="_blank" style="color:#fff; text-decoration:none;">Privacy Policy</a></li>
      <li><a href="cookie-policy.html" target="_blank" style="color:#fff; text-decoration:none;">Cookie Policy</a></li>
      <li><a href="disclaimer.html" target="_blank" style="color:#fff; text-decoration:none;">Disclaimer</a></li>
      <li><a href="accessibility.html" target="_blank" style="color:#fff; text-decoration:none;">Accessibility</a></li>
      <li><a href="contact.html" target="_blank" style="color:#fff; text-decoration:none;">Contact Us</a></li>
    </ul>

    <!-- Copyright -->
    <p style="margin:0; font-size:12px; color:#ccc;">© 2025 SA Private Protection Services (PTY) LTD. All rights reserved.</p>
  </div>
</footer>

<!-- COOKIE CONSENT BANNER -->
<div id="cookieConsentBanner" style="position:fixed;bottom:0;width:100%;background:#222;color:#fff;padding:15px;text-align:center;display:none;z-index:9999; font-family:'Montserrat',sans-serif;">
  This website uses cookies to enhance your browsing experience.
  <button id="acceptCookies" style="margin-left:10px;padding:6px 14px;border:none;background:#ff7b00;color:#fff;cursor:pointer;border-radius:3px;">Accept</button>
</div>

<script>
  // Cookie consent logic
  window.addEventListener('load', function() {
    if (!localStorage.getItem('cookiesAccepted')) {
      document.getElementById('cookieConsentBanner').style.display = 'block';
    }
    document.getElementById('acceptCookies').onclick = function() {
      localStorage.setItem('cookiesAccepted', 'true');
      document.getElementById('cookieConsentBanner').style.display = 'none';
    };
  });
</script>
  <!-- Floating social buttons (bottom-right) -->
  <div class="floating-buttons" aria-hidden="false">
    <a class="float-btn whatsapp" href="https://wa.me/27732105102" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
      <img src="logo-whatsapp.png" alt="WhatsApp">
    </a>
    <a class="float-btn facebook" href="https://www.facebook.com/sa-private-protection-services" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
      <img src="Facebook Logo.png" alt="Facebook">
    </a>
    <a class="float-btn tiktok" href="https://www.tiktok.com/@saprivateprotection" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
      <img src="logo-tiktok.png" alt="TikTok">
    </a>
    <a class="float-btn linkedin" href="https://www.linkedin.com/in/sa-private-protection-services" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
      <img src="linkedin logo.png" alt="LinkedIn">
    </a>
  </div>

<script>

  /* =========================
   LIGHTBOX
   ========================= */
(function() {
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const captionText = document.getElementById('caption');
  const images = Array.from(document.querySelectorAll('.lightbox-img'));
  let currentIndex = 0;

  function showImage(index) {
    if(index < 0 || index >= images.length) return;
    currentIndex = index;
    const img = images[index];
    lightboxImg.src = img.src;
    lightboxImg.alt = img.alt || '';
    captionText.innerHTML = img.alt || '';
    lightbox.style.display = 'block';
    lightbox.setAttribute('aria-hidden', 'false');
    document.documentElement.style.overflow = 'hidden';
    document.body.style.overflow = 'hidden';
  }

  images.forEach((img, index) => {
    img.style.pointerEvents = 'auto';
    img.addEventListener('click', () => showImage(index));
    img.setAttribute('tabindex','0');
    img.addEventListener('keydown', (ev) => {
      if(ev.key === 'Enter' || ev.key === ' ') {
        ev.preventDefault();
        showImage(index);
      }
    });
  });

  document.querySelector('.next').onclick = () => showImage((currentIndex + 1) % images.length);
  document.querySelector('.prev').onclick = () => showImage((currentIndex - 1 + images.length) % images.length);
  document.querySelector('.close').onclick = closeLightbox;
  function closeLightbox(){
    lightbox.style.display = 'none';
    lightbox.setAttribute('aria-hidden', 'true');
    document.documentElement.style.overflow = '';
    document.body.style.overflow = '';
  }
  lightbox.addEventListener('click', (e) => { if(e.target === lightbox) closeLightbox(); });
  document.addEventListener('keydown', (e) => {
    if(lightbox.style.display === 'block') {
      if(e.key === 'ArrowRight') document.querySelector('.next').click();
      if(e.key === 'ArrowLeft') document.querySelector('.prev').click();
      if(e.key === 'Escape') closeLightbox();
    }
  });
})();

  /* =========================
     NAV BEHAVIOUR
     - unified: first click opens submenu, second click follows link (desktop & mobile)
     - explicit ▾ buttons still toggle submenus
     - click outside closes submenus & mobile menu
     ========================= */

  const nav = document.getElementById('mainNav');
  const navLinks = document.getElementById('navLinks');
  const navToggle = document.getElementById('navToggle');
  const heroOverlay = document.getElementById('heroOverlay');

  // HERO overlay dim on scroll + navbar fade
  window.addEventListener('scroll', () => {
    const y = window.scrollY;
    nav.style.background = `rgba(17,17,17, ${Math.min(Math.max(y/300,0.6),0.95)})`;
    if(heroOverlay) heroOverlay.style.background = `rgba(0,0,0, ${Math.min(0.35 + (y/1000),0.9)})`;
  });

  // mobile hamburger toggle
  navToggle.addEventListener('click', () => {
    const expanded = navToggle.getAttribute('aria-expanded') === 'true';
    navToggle.setAttribute('aria-expanded', String(!expanded));
    navLinks.classList.toggle('open');
    navToggle.classList.toggle('active');
  });

  // close mobile menu when a nav link (non-parent) is clicked
  navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      // if mobile menu open, close it
      if(navLinks.classList.contains('open')) {
        navLinks.classList.remove('open');
        navToggle.classList.remove('active');
        navToggle.setAttribute('aria-expanded', 'false');
      }
    });
  });

  // Submenu toggles & unified pointer behaviour
  document.querySelectorAll('.has-submenu').forEach(li => {
    const button = li.querySelector('.submenu-toggle');
    const submenu = li.querySelector('ul.submenu');
    const anchor = li.querySelector('a.nav-link');

    // explicit toggle button (mobile & desktop)
    if (button && submenu) {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const isOpen = submenu.classList.toggle('open');
        button.setAttribute('aria-expanded', String(isOpen));
        anchor.setAttribute('aria-expanded', String(isOpen));
        if (isOpen) li.classList.add('submenu-open');
        else li.classList.remove('submenu-open');
      });
    }

    // Unified pointer behavior (first click opens submenu, second click follows link)
    if (anchor && submenu) {
      anchor.addEventListener('pointerdown', (ev) => {
        // If submenu closed -> prevent navigation and open it.
        const isOpen = submenu.classList.contains('open') || li.classList.contains('submenu-open');
        if (!isOpen) {
          ev.preventDefault(); // stop the navigation on first click
          // close other submenus first
          closeAllSubmenus();
          submenu.classList.add('open');
          li.classList.add('submenu-open');
          // set aria states
          const btn = li.querySelector('.submenu-toggle');
          if (btn) btn.setAttribute('aria-expanded', 'true');
          anchor.setAttribute('aria-expanded', 'true');
        } else {
          // submenu currently open -> allow the click to proceed to the link,
          // but schedule submenu to close after a short delay so the user sees the effect
          setTimeout(() => {
            submenu.classList.remove('open');
            li.classList.remove('submenu-open');
            const btn = li.querySelector('.submenu-toggle');
            if (btn) btn.setAttribute('aria-expanded', 'false');
            anchor.setAttribute('aria-expanded', 'false');
          }, 600);
        }
      });

      // Keyboard support: Enter or Space toggles submenu (same unified behavior)
      anchor.addEventListener('keydown', (ev) => {
        if (ev.key === 'Enter' || ev.key === ' ') {
          ev.preventDefault();
          const isOpen = submenu.classList.contains('open') || li.classList.contains('submenu-open');
          if (!isOpen) {
            closeAllSubmenus();
            submenu.classList.add('open');
            li.classList.add('submenu-open');
            const btn = li.querySelector('.submenu-toggle');
            if (btn) btn.setAttribute('aria-expanded', 'true');
            anchor.setAttribute('aria-expanded', 'true');
          } else {
            // if already open, follow the link by navigating manually
            window.location.href = anchor.href;
          }
        }
      });
    }
  });

  function closeAllSubmenus() {
    document.querySelectorAll('.has-submenu').forEach(li => {
      const submenu = li.querySelector('ul.submenu');
      if (submenu) submenu.classList.remove('open');
      li.classList.remove('submenu-open');
      const btn = li.querySelector('.submenu-toggle');
      if (btn) btn.setAttribute('aria-expanded', 'false');
      const anchor = li.querySelector('a.nav-link');
      if (anchor) anchor.setAttribute('aria-expanded', 'false');
    });
  }

  // click outside to close any open submenu or mobile menu
  document.addEventListener('click', (e) => {
    if (!nav.contains(e.target)) {
      closeAllSubmenus();
      if (navLinks.classList.contains('open')) {
        navLinks.classList.remove('open');
        navToggle.classList.remove('active');
        navToggle.setAttribute('aria-expanded', 'false');
      }
    }
  });

  // simple scroll spy (highlights anchors)
  const navSpyLinks = document.querySelectorAll('nav a[href^="#"]');
  const sections = document.querySelectorAll('main section, header');
  function onScrollSpy(){
    const top = window.scrollY + 80;
    sections.forEach(sec => {
      const id = sec.id;
      if(!id) return;
      const offsetTop = sec.offsetTop;
      const height = sec.offsetHeight;
      const link = document.querySelector(`nav a[href="#${id}"]`);
      if(top >= offsetTop && top < offsetTop + height){
        navSpyLinks.forEach(a=>a.classList.remove('active'));
        if(link) link.classList.add('active');
      }
    });
  }
  window.addEventListener('scroll', onScrollSpy);
  window.addEventListener('load', () => {
    // reveal on load
    document.querySelectorAll('main section').forEach(s => {
      const r = s.getBoundingClientRect();
      if(r.top < window.innerHeight - 80) s.classList.add('visible');
    });
    onScrollSpy();
  });

  // Fade-in on scroll for sections using IntersectionObserver
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if(entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, {threshold: 0.12});
  document.querySelectorAll('main section').forEach(s => observer.observe(s));

</script>

<!-- Smooth scroll handler that offsets for fixed nav and closes menus -->
<script>
(function(){
  // get nav height from CSS variable, fallback to 64
  const navHeightRaw = getComputedStyle(document.documentElement).getPropertyValue('--nav-height');
  const NAV_HEIGHT = navHeightRaw ? parseInt(navHeightRaw, 10) : 64;

  function scrollToIdWithOffset(hash) {
    if(!hash) return false;
    const id = hash.replace('#','');
    const target = document.getElementById(id);
    if(!target) return false;
    const rect = target.getBoundingClientRect();
    const scrollTop = window.scrollY + rect.top - NAV_HEIGHT - 8; // small gap
    window.scrollTo({ top: Math.max(scrollTop, 0), behavior: 'smooth' });
    return true;
  }

  // enhance nav fragment links
  document.querySelectorAll('nav a[href^="#"], #navLinks a[href^="#"]').forEach(a => {
    a.addEventListener('click', function(e){
      const href = this.getAttribute('href');
      if(href && href.startsWith('#')) {
        const handled = scrollToIdWithOffset(href);
        // close mobile menu & submenus
        const navLinksEl = document.getElementById('navLinks');
        if(navLinksEl && navLinksEl.classList.contains('open')) {
          navLinksEl.classList.remove('open');
          const navToggleEl = document.getElementById('navToggle');
          if(navToggleEl){ navToggleEl.classList.remove('active'); navToggleEl.setAttribute('aria-expanded','false'); }
        }
        closeAllSubmenus();
        if(handled) {
          e.preventDefault();
          // update the URL hash without jumping
          history.replaceState(null, '', href);
        }
      }
    }, {passive: false});
  });

  // If page loads with hash, scroll to it with offset
  window.addEventListener('load', () => {
    if(location.hash){
      setTimeout(() => scrollToIdWithOffset(location.hash), 60);
    }
  });
})();
</script>

</body>
</html>
